(()=>{"use strict";var e,t={757:(e,t,a)=>{const r=window.React,n=window.wp.blocks,o=window.wp.i18n,c=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"spfa/sync-product-from-amazon","version":"1.0.0","title":"Sync Product From Amazon","category":"sync-product-from-amazon","description":"This block will be used to retrieve data from Amazon using an ASIN number. It can fetch various Amazon product details such as price, sale price, CTA link, etc.","keywords":["amazon","product","price"],"supports":{"html":false},"textdomain":"sync-product-from-amazon","attributes":{"productDetails":{"type":"array","default":[]}},"editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css","render":"file:./block.php"}'),s=window.wp.apiFetch;var l=a.n(s);const m=window.wp.element,i=window.wp.blockEditor,u=window.wp.components,d=(0,r.createElement)("svg",{id:"spfa_svg_logo",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,r.createElement)("defs",null,(0,r.createElement)("style",{type:"text/css"},"#spfa_svg_logo ","{","color:#FD5636;","}")),(0,r.createElement)("rect",{width:"24",height:"24",fill:"#F5F5F5"}),(0,r.createElement)("rect",{width:"24",height:"24",fill:"#FD5636"}),(0,r.createElement)("rect",{x:"2.5",y:"2.5",width:"19",height:"19",fill:"#FD5636"}),(0,r.createElement)("rect",{x:"2.5",y:"2.5",width:"19",height:"19",stroke:"#FD5636"}),(0,r.createElement)("rect",{x:"2.5",y:"2.5",width:"19",height:"19",stroke:"#FD5636","stroke-opacity":"0.2"}),(0,r.createElement)("path",{d:"M2.5 21.5V2.5H21.5V21.5H2.5Z",stroke:"white"}),(0,r.createElement)("path",{d:"M11.5295 7.4625L12.0344 8L12.5401 7.4625L13.045 8L13.5499 7.4625L14.0333 7.97677V2H10.0333V7.97831L10.5189 7.4625L11.0246 8L11.5295 7.4625Z",fill:"white"}),(0,r.createElement)("path",{d:"M17.0969 12.393C15.7341 13.4252 13.7795 13.9668 12.1072 13.9543C9.76225 13.9368 7.67124 13.0059 6.10745 11.472C5.98459 11.3514 6.10058 11.1891 6.24912 11.2834C7.94953 12.3544 10.0667 13.0069 12.2681 13.0233C13.7527 13.0344 15.393 12.7225 16.9094 12.0611C17.1385 11.9611 17.3226 12.221 17.0969 12.393Z",fill:"white"}),(0,r.createElement)("path",{d:"M17.6686 11.7245C17.503 11.4923 16.5386 11.607 16.1058 11.6578C15.9739 11.6737 15.9565 11.5528 16.0769 11.4669C16.8552 10.9038 18.1084 11.0774 18.2508 11.2691C18.3931 11.4619 18.1794 12.7898 17.4458 13.4189C17.3332 13.5155 17.229 13.4628 17.281 13.3339C17.4519 12.9094 17.8351 11.9578 17.6686 11.7245Z",fill:"white"}));(0,n.registerBlockType)(c,{icon:d,edit:e=>{const{attributes:t,setAttributes:a}=e,{productDetails:n}=t,c=(0,i.useBlockProps)(),[s,d]=(0,m.useState)(!1),[p,f]=(0,m.useState)(!1),[_,y]=(0,m.useState)(!1),[h,v]=(0,m.useState)(!1),[w,E]=(0,m.useState)(""),[g,z]=(0,m.useState)(!1),[N,b]=(0,m.useState)(2),k=()=>{b(g?2:n[0]?.features?.length||0),z(!g)},P=e=>/^[A-Z0-9]{10}$/.test(e);return(0,r.createElement)(r.Fragment,null,(0,r.createElement)("div",{...c},s?(0,r.createElement)("div",{className:"sync-product-from-amazon__loader"}):(0,r.createElement)("div",{className:"sync-product-from-amazon__container"},n&&(0,r.createElement)("div",{className:"sync-product-from-amazon__product"},n.map(((e,t)=>(0,r.createElement)("div",{key:t,className:"sync-product-from-amazon"},(0,r.createElement)("div",{className:"sync-product-from-amazon__left_wrapper"},(0,r.createElement)("div",{className:"sync-product-from-amazon__image"},(0,r.createElement)("img",{src:e.mediaURL,alt:e.title})),(0,r.createElement)("div",{className:"sync-product-from-amazon__details_wrap"},(0,r.createElement)("div",{className:"sync-product-from-amazon__price_detail"},(0,r.createElement)("div",{className:"sync-product-from-amazon__org_price"},(0,r.createElement)("span",null,e.price)),(0,r.createElement)("div",{className:"sync-product-from-amazon__sale_price"},(0,r.createElement)("span",null,e.salePrice))),(0,r.createElement)("a",{href:e.productURL,className:"sync-product-from-amazon__button"},(0,r.createElement)("span",{className:"sync-product-from-amazon__link"},(0,o.__)("View on Amazon","sync-product-from-amazon"))))),(0,r.createElement)("div",{className:"sync-product-from-amazon__content"},(0,r.createElement)("h4",{className:"sync-product-from-amazon__title"},e.title),(0,r.createElement)("div",{className:"sync-product-from-amazon__features"},(0,r.createElement)("ul",null,e.features.slice(0,N).map(((e,t)=>(0,r.createElement)("li",{key:t,className:"sync-product-from-amazon__feature_item"},e))),e.features.length>2&&(0,r.createElement)("a",{variant:"link",onClick:k,className:"sync-product-from-amazon__show-more sync-product-from-amazon__feature_item_show_more"},g?(0,o.__)("Show less","sync-product-from-amazon"):(0,o.__)("Show more","sync-product-from-amazon"))))))))),!n||0===n.length&&(0,r.createElement)("p",null,(0,o.__)("Please enter ASIN number and click on Fetch Product button to fetch product details.","sync-product-from-amazon")),p&&(0,r.createElement)("p",{className:"sync-product-from-amazon__error"},(0,o.__)("Product not found. Please enter valid ASIN number.","sync-product-from-amazon")))),(0,r.createElement)(i.InspectorControls,null,(0,r.createElement)(u.PanelBody,{title:(0,o.__)("Block Settings","sync-product-from-amazon"),initialOpen:!0},(0,r.createElement)(u.TextControl,{label:(0,o.__)("Enter ASIN Numberâ€¦","sync-product-from-amazon"),onChange:e=>{y(!1),P(e)&&v(!1),E(e)}}),_&&(0,r.createElement)("p",{className:"sync-product-from-amazon__error"},(0,o.__)("Please add ASIN number.","sync-product-from-amazon")),h&&(0,r.createElement)("p",{className:"sync-product-from-amazon__error"},(0,o.__)("Please enter valid ASIN number.","sync-product-from-amazon")),(0,r.createElement)(u.Button,{variant:"primary",onClick:()=>{(async e=>{if(e)if(P(e)){v(!1),d(!0);try{const t=await l()({path:"/sync-product-from-amazon/v1/fetch-product",method:"POST",data:{asin:e}});if(t.ItemsResult.Items&&t.ItemsResult.Items.length>0){const r=t.ItemsResult.Items.map((t=>{var a;const r=t.ItemInfo,n=t.Offers,o=t.Images,c=parseFloat(n.Listings[0].Price.Amount)+parseFloat(n.Listings[0].Price.Savings.Amount),s=null!==(a=n.Listings[0].Price.DisplayAmount.charAt(0))&&void 0!==a?a:0;return{title:r.Title.DisplayValue,mediaURL:o.Primary.Medium.URL,productURL:t.DetailPageURL,asin:e,features:r.Features.DisplayValues,price:s+c.toFixed(2),salePrice:n.Listings[0].Price.DisplayAmount,discountPercentage:n.Listings[0].PercentageSaved}}));a({productDetails:r})}else f(!0);d(!1)}catch(e){f(e?.message)}finally{d(!1)}}else v(!0);else y(!0)})(w)}},(0,o.__)("Fetch Product","sync-product-from-amazon")))))},save:function(){return null}})}},a={};function r(e){var n=a[e];if(void 0!==n)return n.exports;var o=a[e]={exports:{}};return t[e](o,o.exports,r),o.exports}r.m=t,e=[],r.O=(t,a,n,o)=>{if(!a){var c=1/0;for(i=0;i<e.length;i++){a=e[i][0],n=e[i][1],o=e[i][2];for(var s=!0,l=0;l<a.length;l++)(!1&o||c>=o)&&Object.keys(r.O).every((e=>r.O[e](a[l])))?a.splice(l--,1):(s=!1,o<c&&(c=o));if(s){e.splice(i--,1);var m=n();void 0!==m&&(t=m)}}return t}o=o||0;for(var i=e.length;i>0&&e[i-1][2]>o;i--)e[i]=e[i-1];e[i]=[a,n,o]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={954:0,78:0};r.O.j=t=>0===e[t];var t=(t,a)=>{var n,o,c=a[0],s=a[1],l=a[2],m=0;if(c.some((t=>0!==e[t]))){for(n in s)r.o(s,n)&&(r.m[n]=s[n]);if(l)var i=l(r)}for(t&&t(a);m<c.length;m++)o=c[m],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(i)},a=self.webpackChunksync_product_from_amazon_plugin=self.webpackChunksync_product_from_amazon_plugin||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var n=r.O(void 0,[78],(()=>r(757)));n=r.O(n)})();